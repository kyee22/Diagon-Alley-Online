# å¯¹è§’å·· Online ğŸ§™â€â™‚ï¸âœ¨ğŸ›’

>   Ruby on Rails æ•æ·å¼€å‘å¤§ä½œä¸š
>
>   *   åŒ¡äº¦ç…Šï¼ˆ$22371092$ï¼Œè®¡ç®—æœºå­¦é™¢ï¼‰
>   *   é€‰åšé¢˜ç›®ï¼š**`ç®€æ˜“ç”µå­å•†åŠ¡ç³»ç»Ÿ`**

![image-20241215111830991](img/0.png)

æ¬¢è¿æ¥åˆ°**å¯¹è§’å·· Online**â€”â€”ä¸€ä¸ªå……æ»¡é­”æ³•ä¸å¥‡å¹»çš„ç”µå­å•†åŠ¡ç³»ç»Ÿï¼çµæ„Ÿæ¥è‡ªã€Šå“ˆåˆ©Â·æ³¢ç‰¹ã€‹ä¸­çš„å¯¹è§’å··ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸ºä½ å‘ˆç°äº†ä¸€ä¸ªèåˆäº†é­”æ³•å…ƒç´ çš„è´­ç‰©ä½“éªŒã€‚ç”¨æˆ·å¯ä»¥åœ¨é­”æ³•ä¸–ç•Œä¸­è´­ä¹°é­”æ³•ç”¨å“ã€é­”æ–ã€é£å¤©æ‰«å¸šç­‰å•†å“ï¼Œè€Œç®¡ç†å‘˜åˆ™åƒéœæ ¼æ²ƒèŒ¨çš„å•†ä¼šç®¡ç†å‘˜ä¸€æ ·ï¼Œè´Ÿè´£ç®¡ç†é­”æ³•ç‰©å“çš„åº“å­˜ã€å¤„ç†è®¢å•ç­‰äº‹åŠ¡ã€‚

é€šè¿‡ Ruby on Rails å¼€å‘ï¼Œæ‰“é€ ä¸€ä¸ªé­”æ³•ä¸–ç•Œé‡Œçš„ç”µå­å•†åŠ¡ç³»ç»Ÿï¼Œæä¾›ä¸€ç³»åˆ—é¢å‘ç”¨æˆ·å’Œç®¡ç†å‘˜çš„åŠŸèƒ½ï¼š

-   **ä¹°å®¶**å¯ä»¥åœ¨é­”æ³•å¸‚åœºä¸­æµè§ˆå’Œè´­ä¹°é­”æ³•ç‰©å“ã€ç®¡ç†è´­ç‰©è½¦ä¸è®¢å•ã€æ”¶è—é­”æ³•ç‰©å“ã€‚
-   **ç®¡ç†å‘˜**å¦‚åŒé­”æ³•å•†åº—çš„è€æ¿ï¼Œè´Ÿè´£ç®¡ç†é­”æ³•ç‰©å“ã€æŸ¥çœ‹å’Œå¤„ç†è®¢å•ã€‚

## ç¬¬é›¶éƒ¨åˆ†ï¼šå¼€å‘å’Œè¿è¡Œç¯å¢ƒ

*   OS: `Linux å‘è¡Œç‰ˆ Ubuntu 22.04.4 LTS`
*   IDE: `RubyMine 2024.2.1`
*   Ruby: `ruby 3.3.5 (2024-09-03 revision ef084cc8f4) [x86_64-linux]`
*   Rails: `Rails 7.2.2`

## ç¬¬ä¸€éƒ¨åˆ†ï¼šéœ€æ±‚åˆ†æ

>   TODOï¼š
>
>   *   ä¹°å®¶æ“ä½œ
>       -   [x] æµè§ˆäº§å“åˆ—è¡¨ =>  æŸ¥çœ‹å•å“è¯¦æƒ…
>       -   [x] æ·»åŠ åˆ°è´­ç‰©è½¦
>       -   [x] è´­ç‰©è½¦å†…å®¹ç”Ÿæˆè®¢å•
>       -   [x] æŸ¥çœ‹è‡ªå·±çš„è®¢å•åˆ—è¡¨
>       -   [x] è®¢å•æ“ä½œï¼ˆä»˜æ¬¾ï¼Œç¡®è®¤æ”¶è´§ï¼Œå–æ¶ˆè®¢å•ï¼‰
>       -   [x] æ·»åŠ äº§å“åˆ°æ”¶è—å¤¹
>       -   [x] æµè§ˆæ”¶è—å¤¹
>       -   [x] å°†äº§å“ä»æ”¶è—å¤¹å†…åˆ é™¤
>   *   ç®¡ç†å‘˜æ“ä½œ
>       -   [x] æ·»åŠ /ç¼–è¾‘/æŸ¥çœ‹/åˆ é™¤äº§å“
>       -   [x] æŸ¥çœ‹æ‰€æœ‰è®¢å•åˆ—è¡¨
>       -   [x] å¤„ç†è®¢å•ï¼ˆå‘è´§/åˆ é™¤ï¼‰

## ç¬¬äºŒéƒ¨åˆ†ï¼šåŠŸèƒ½å®ç°

### æ¦‚å¿µæ¨¡å‹

çœç•¥äº†å…³ç³»åç§°çš„æ¦‚å¿µæ¨¡å‹å›¾å¦‚ä¸‹æ‰€ç¤º

![](./img/er.drawio.svg)

### å®ç°æ€è·¯

å¯ä»¥å‘ç°å¯¹è±¡ä¹‹é—´çš„å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œäºæ˜¯åœ¨å®ç°çš„æ—¶å€™è¦å°†å…¶åˆ†è€Œæ²»ä¹‹ã€‚æ³¨æ„åˆ°å›¾ä¸­çš„å¯¹è±¡å¯ä»¥åˆ†ä¸ºä»¥**ç”¨æˆ·**ä¸ºä¸­å¿ƒä»¥åŠä»¥**äº§å“**ä¸ºä¸­å¿ƒ $2$ å¤§éƒ¨åˆ†ã€‚å®ç°æ€è·¯

1.   å®ç°ä»¥äº§å“ä¸ºä¸­å¿ƒçš„éƒ¨åˆ†ï¼š`äº§å“`ã€`é¢œè‰²`ã€`ç±»å‹`ã€`å¤§å°` å’Œ `æ¬¾å¼`ï¼Œä¸éš¾å‘ç°è¿™ä¸ `Blog4` é¡¹ç›®ä¸­ `recipe` å’Œ `category` çš„å…³ç³»å¦‚å‡ºä¸€è¾™ï¼›
2.   å®ç°ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„éƒ¨åˆ†ï¼š`ç”¨æˆ·` å’Œ `æ”¶è´§åœ°å€`ï¼Œåˆ©ç”¨ devise æ’ä»¶å¯ä»¥å¿«é€Ÿæ„å»ºç”¨æˆ·ç®¡ç†çš„åŸºç¡€è®¾æ–½ï¼Œä»è€Œé¿å…é‡å¤é€ è½®å­ï¼Œå¹¶åŒºåˆ†å‡º `user` å’Œ `admin` $2$ ç§ `role`ï¼›
3.   æœ€åå°† $2$ å¤§éƒ¨åˆ†â€œè¿æ¥â€èµ·æ¥ï¼Œå®ç°å…¶ä¸­çš„ `è®¢å•`ï¼Œ`è®¢å•é¡¹`ã€`è´­ç‰©è½¦` å’Œ `æ”¶è—å¤¹`ã€‚

### æ•°æ®æ¨¡å‹

ä»¥ä¸Šå…³ç³»å›¾å¯¹åº”çš„æ•°æ®æ¨¡å¼å¦‚ä¸‹æ‰€ç¤º

```ruby
ActiveRecord::Schema[7.2].define(version: 2024_12_14_070303) do
  create_table "active_storage_attachments", force: :cascade do |t|
    t.string "name", null: false
    t.string "record_type", null: false
    t.bigint "record_id", null: false
    t.bigint "blob_id", null: false
    t.datetime "created_at", null: false
    t.index ["blob_id"], name: "index_active_storage_attachments_on_blob_id"
    t.index ["record_type", "record_id", "name", "blob_id"], name: "index_active_storage_attachments_uniqueness", unique: true
  end

  create_table "active_storage_blobs", force: :cascade do |t|
    t.string "key", null: false
    t.string "filename", null: false
    t.string "content_type"
    t.text "metadata"
    t.string "service_name", null: false
    t.bigint "byte_size", null: false
    t.string "checksum"
    t.datetime "created_at", null: false
    t.index ["key"], name: "index_active_storage_blobs_on_key", unique: true
  end

  create_table "active_storage_variant_records", force: :cascade do |t|
    t.bigint "blob_id", null: false
    t.string "variation_digest", null: false
    t.index ["blob_id", "variation_digest"], name: "index_active_storage_variant_records_uniqueness", unique: true
  end

  create_table "cart_items", force: :cascade do |t|
    t.integer "user_id", null: false
    t.integer "product_id", null: false
    t.integer "quantity"
    t.datetime "added_at"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.index ["product_id"], name: "index_cart_items_on_product_id"
    t.index ["user_id"], name: "index_cart_items_on_user_id"
  end

  create_table "colors", force: :cascade do |t|
    t.string "name"
    t.string "code"
    t.decimal "opacity"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
  end

  create_table "delivery_addresses", force: :cascade do |t|
    t.integer "user_id", null: false
    t.string "phone"
    t.string "postal_code"
    t.text "address"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.string "receiver_name"
    t.index ["user_id"], name: "index_delivery_addresses_on_user_id"
  end

  create_table "designs", force: :cascade do |t|
    t.string "name"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
  end

  create_table "favorites", force: :cascade do |t|
    t.integer "user_id", null: false
    t.integer "product_id", null: false
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.index ["product_id"], name: "index_favorites_on_product_id"
    t.index ["user_id"], name: "index_favorites_on_user_id"
  end

  create_table "order_items", force: :cascade do |t|
    t.integer "order_id", null: false
    t.integer "product_id", null: false
    t.integer "quantity"
    t.decimal "price"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.index ["order_id"], name: "index_order_items_on_order_id"
    t.index ["product_id"], name: "index_order_items_on_product_id"
  end

  create_table "orders", force: :cascade do |t|
    t.integer "user_id", null: false
    t.integer "delivery_address_id", null: false
    t.decimal "total_price", precision: 10, scale: 2, default: "0.0", null: false
    t.integer "status", default: 0, null: false
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.index ["delivery_address_id"], name: "index_orders_on_delivery_address_id"
    t.index ["user_id"], name: "index_orders_on_user_id"
  end

  create_table "products", force: :cascade do |t|
    t.string "name"
    t.text "description"
    t.decimal "price"
    t.integer "sales", default: 0
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.integer "color_id", null: false
    t.integer "type_id", null: false
    t.integer "size_id", null: false
    t.integer "design_id", null: false
    t.index ["color_id"], name: "index_products_on_color_id"
    t.index ["design_id"], name: "index_products_on_design_id"
    t.index ["size_id"], name: "index_products_on_size_id"
    t.index ["type_id"], name: "index_products_on_type_id"
  end

  create_table "sizes", force: :cascade do |t|
    t.string "name"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
  end

  create_table "types", force: :cascade do |t|
    t.string "name"
    t.integer "rarity"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
  end

  create_table "users", force: :cascade do |t|
    t.string "email", default: "", null: false
    t.string "encrypted_password", default: "", null: false
    t.string "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.string "role"
    t.index ["email"], name: "index_users_on_email", unique: true
    t.index ["reset_password_token"], name: "index_users_on_reset_password_token", unique: true
  end

  add_foreign_key "active_storage_attachments", "active_storage_blobs", column: "blob_id"
  add_foreign_key "active_storage_variant_records", "active_storage_blobs", column: "blob_id"
  add_foreign_key "cart_items", "products"
  add_foreign_key "cart_items", "users"
  add_foreign_key "delivery_addresses", "users"
  add_foreign_key "favorites", "products"
  add_foreign_key "favorites", "users"
  add_foreign_key "order_items", "orders"
  add_foreign_key "order_items", "products"
  add_foreign_key "orders", "delivery_addresses"
  add_foreign_key "orders", "users"
  add_foreign_key "products", "colors"
  add_foreign_key "products", "designs"
  add_foreign_key "products", "sizes"
  add_foreign_key "products", "types"
end
```

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šåŠŸèƒ½å±•ç¤º

### ç”¨æˆ·ç«¯

*   æµè§ˆäº§å“åˆ—è¡¨ã€æŸ¥çœ‹å•å“è¯¦æƒ…

    ![image-20241215111208278](img/1.png)

*   æ·»åŠ åˆ°è´­ç‰©è½¦ã€è´­ç‰©è½¦å†…å®¹ç”Ÿæˆè®¢å•

    ![image-20241215111348074](img/2.png)

*   æŸ¥çœ‹è‡ªå·±çš„è®¢å•åˆ—è¡¨ã€è®¢å•æ“ä½œï¼ˆä»˜æ¬¾ï¼Œç¡®è®¤æ”¶è´§ï¼Œå–æ¶ˆè®¢å•ï¼‰

    ![image-20241215111421386](img/3.png)

*   æ·»åŠ äº§å“åˆ°æ”¶è—å¤¹ã€æµè§ˆæ”¶è—å¤¹ã€å°†äº§å“ä»æ”¶è—å¤¹å†…åˆ é™¤

    ![image-20241215111502207](img/4.png)

*   ç®¡ç†è‡ªå·±çš„æ”¶è´§åœ°å€

    ![image-20241215111557971](img/5.png)

### ç®¡ç†ç«¯

*   æ·»åŠ /ç¼–è¾‘/æŸ¥çœ‹/åˆ é™¤äº§å“

    ![image-20241215111705974](img/6.png)

*   æŸ¥çœ‹æ‰€æœ‰è®¢å•åˆ—è¡¨ã€å¤„ç†è®¢å•ï¼ˆå‘è´§/åˆ é™¤ï¼‰

    ![image-20241215111729430](img/7.png)

*   ç®¡ç†å•†å“çš„ 4 ä¸ªå±æ€§

    ![image-20241215111759277](img/8.png)

## ç¬¬å››éƒ¨åˆ†ï¼šæµ‹è¯•ä¸éªŒè¯

### å•å…ƒæµ‹è¯•

ç”±äº Rails å•å…ƒæµ‹è¯•æ¡†æ¶ä½¿ç”¨èµ·æ¥ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼ˆæ¯”å¦‚ä¸ç”¨æˆ·ç™»å½•ï¼Œç”¨æˆ·èº«ä»½é‰´æƒç»“åˆèµ·æ¥çš„æ—¶å€™ï¼‰ï¼Œæ•…æ²¡æœ‰ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œè€Œæ˜¯æ¯å®Œæˆä¸€ä¸ªå°æ¨¡å—ï¼Œå°±åœ¨æµè§ˆå™¨ç«¯æµ‹è¯•éªŒè¯ï¼Œè¾¹å¼€å‘è¾¹æµ‹è¯•ã€‚

### é”™è¯¯å¤„ç†

å…¶ä¸­ï¼Œä»å…³ç³»å›¾å¯ä»¥å‘ç°ä¸€ä¸ªæ¯”è¾ƒ non-trivial çš„é—®é¢˜æ˜¯ï¼Œå½“ä¸€ä¸ªå®ä½“ destroy æ—¶ï¼Œå®ƒä¾èµ–çš„å…³ç³»åº”è¯¥ destroy å—ï¼Ÿæˆ‘å¯¹å…¶ä¸­ä¸€äº›éƒ¨åˆ†è¿›è¡Œäº†ä¿å®ˆçš„é”™è¯¯å¤„ç†ï¼Œè¿™æ ·çš„æ–¹å¼å¯èƒ½ä¸å°½åˆç†ï¼Œè€Œä¸”å¯èƒ½è¿˜æœ‰å…¶ä»–åœ°æ–¹æ²¡æœ‰è¦†ç›–åˆ°çš„åœ°æ–¹å¯èƒ½ä¼šæŠ›å‡ºæ„æƒ³ä¸åˆ°çš„å¼‚å¸¸ `:)` ã€‚

*   å½“æ”¶è´§åœ°å€å…³è”åˆ°è®¢å•é¡¹ï¼ˆæ— è®ºè®¢å•é¡¹çš„ç”Ÿå‘½å‘¨æœŸï¼‰æ—¶ï¼Œä¸å…è®¸åˆ é™¤ï¼š

    ![image-20241215112738792](img/9.png)

*   å½“é¢œè‰²ï¼ˆå¤§å°ï¼Œæ¬¾å¼æˆ–ç±»å‹ï¼‰å…³è”åˆ°äº§å“æ—¶ï¼Œä¸å…è®¸åˆ é™¤ï¼š

    ![image-20241215112838718](img/10.png)

*   å½“äº§å“å…³è”åˆ°è®¢å•é¡¹æ—¶ï¼Œä¸å…è®¸åˆ é™¤

    ![image-20241215112931483](img/11.png)

## å°ç»“

æ€»çš„æ¥è¯´ï¼Œ`å¯¹è§’å·· Online ` æ˜¯ä¸€æ¬¡éå¸¸ä¸é”™çš„å‰åç«¯ä¸åˆ†ç¦»çš„æ•æ·å¼€å‘å®è·µã€‚åœ¨å†™åŒæœŸçš„å‰åç«¯åˆ†ç¦»çš„æ•°æ®åº“å¤§ä½œä¸šæ—¶ï¼Œä»… $6$ ä¸ªå®ä½“æˆ‘å°±å†™äº†éå¸¸ä¹… :sob:ï¼Œ è€Œ `å¯¹è§’å·· Online `  è™½ç„¶æœ‰ $11$ ä¸ªå®ä½“ï¼Œä½†å¯ä»¥ç›¸å¯¹å¾ˆå¿«çš„è¾¾æˆéœ€æ±‚ã€‚